<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#FF9800" />
    <title>Tap Tap</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" />
  </head>
  <body>
    <main id="app" class="w-screen h-screen"></main>
  </body>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const colors = [
        '#F44336',
        '#E91E63',
        '#9C27B0',
        '#673AB7',
        '#3F51B5',
        '#2196F3',
        '#03A9F4',
        '#00BCD4',
        '#009688',
        '#4CAF50',
        '#8BC34A',
        '#CDDC39',
        '#FFEB3B',
        '#FFC107',
        '#FF9800',
        '#FF5722',
        '#795548',
        '#9E9E9E',
        '#607D8B',
      ];

      const main = document.querySelector('main');
      const theme = document.head.querySelector('meta[name="theme-color"]');

      function changeColor() {
        const index = 1 + Math.floor(Math.random() * 1000) % colors.length - 1;
        const color = colors[index];
        main.style.backgroundColor = color;
        theme.content = color;

        fetch('/tap/' + localStorage.deviceId);
      }

      main.onclick = changeColor;
      main.ontouchend = changeColor;

      changeColor();
    });
  </script>
  <style>
    main {
      transition: background-color 0.75s ease;
    }
  </style>
</html>